generator client2 {
  provider = "prisma-client-js"
  output   = "../generated/schema-sqlite"
}

/**
 * 默认主库（Postgres）
 */
datasource db_sqlite {
  provider = "sqlite"
  url      = "file:local.db"
}

//////////////////////
// SQLite models   //
//////////////////////

model CoverageQueue {
  id        Int         @id @default(autoincrement())
  payload   Json
  status    QueueStatus @default(PENDING)
  retry     Int         @default(0)
  createdAt DateTime    @default(now())

  @@map("coverage_queue")
}

enum QueueStatus {
  PENDING
  PROCESSING
  DONE
  FAILED
}
