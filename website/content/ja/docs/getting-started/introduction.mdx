# 紹介

## 概要

Canyon（「峡谷」を意味し、発音は /ˈkænjən/）は、JavaScriptコードカバレッジ収集プラットフォームです。開発者とQAエンジニアがエンドツーエンドテスト中にテストケースのコードカバレッジを収集する際の困難を解決します。主に3つの部分で構成されています：

- 様々なCIプロバイダーに適応し、環境変数を検出する一連の[プラグイン](https://github.com/canyon-project/canyon/tree/main/plugins)。

- カバレッジデータの収集と処理を担当し、バックエンドAPIを提供する[nodejsサービス](https://github.com/canyon-project/canyon/tree/main/packages/canyon-backend)。

- カバレッジデータを表示する[reactフロントエンドアプリケーション](https://github.com/canyon-project/canyon/tree/main/packages/canyon-platform)。

![](https://cdn.jsdelivr.net/gh/canyon-project/assets/docs/static/docs/getting-started/introduction/home-screen.png)

## なぜCanyonなのか？

Canyonはコンパイル段階でhitとmapデータを分離することで、UI自動化テストによって生成される大量のカバレッジデータを効率的に処理できます。

さらに、CanyonはよくあるCIプロバイダーに適応し、ビルド段階でプローブコードを挿入し、UI自動化テスト段階でカバレッジデータを収集して報告することができます。

これにより、開発チームは現在のUI自動化テストの__各ケース__のカバレッジ状況を__正確に__、__リアルタイムに__把握でき、コード品質の評価と向上に役立ちます。

### 機能特徴

- [正確で効率的](/docs/core-concepts/separate-hit-and-map)：hitとmapの分離により、コンパイル時に初期カバレッジデータが生成され、正確で効率的なカバレッジデータ収集が可能
- [SourceMap](/docs/core-concepts/restore-source-code-coverage)：正確なソースコードカバレッジ復元
- [ビルドツール](/docs/installation/getting-started)：next.js、vite、webpackなどの一般的なビルドツールのカバレッジソリューションを提供
- [自動化フレームワーク](/docs/end-to-end-testing/getting-started)：一般的なUI自動化フレームワークの統合ソリューション
- [CIプロバイダー](/docs/reference/provider)：一般的なCIプロバイダー（Github Actions、GitLab Runner）に適応し、CI環境変数を検出


### セルフホスティング

カバレッジデータとテストデータを完全に制御したい場合は、自分のインフラストラクチャ上で[セルフホスティング](/docs/self-host/community-edition/prerequisites)することができます。

## エコシステム

| プロジェクト          | ステータス                                                   | 説明                                         |
| --------------------- | ------------------------------------------------------------ | -------------------------------------------- |
| [babel-plugin-canyon] | [![babel-plugin-canyon-status]][babel-plugin-canyon-package] | Babelプラグイン、パイプライン環境変数を検出するため |
| [canyon-uploader]     | [![canyon-uploader-status]][canyon-uploader-package]         | ローカルの`.canyon_output`データをスキャンしてサーバーにアップロード |
| [canyon-extension]    | [![canyon-extension-status]][canyon-extension-package]       | Chromeプラグイン、カバレッジデータを手動で報告するため |

[babel-plugin-canyon]: /docs/ecosystem/babel-plugin-canyon
[vite-plugin-canyon]: https://github.com/canyon-project/vite-plugin-canyon
[canyon-uploader]: /docs/ecosystem/canyon-uploader
[canyon-extension]: /docs/ecosystem/canyon-extension
[babel-plugin-canyon-status]: https://img.shields.io/npm/v/babel-plugin-canyon.svg
[vite-plugin-canyon-status]: https://img.shields.io/npm/v/vite-plugin-canyon.svg
[canyon-uploader-status]: https://img.shields.io/npm/v/canyon-uploader.svg
[canyon-extension-status]: https://img.shields.io/chrome-web-store/v/omnpafdjidgpdmlimbangcjjaaodbeof.svg
[babel-plugin-canyon-package]: https://npmjs.com/package/babel-plugin-canyon
[vite-plugin-canyon-package]: https://npmjs.com/package/babel-plugin-vite
[canyon-uploader-package]: https://npmjs.com/package/canyon-uploader
[canyon-extension-package]: https://chrome.google.com/webstore/detail/canyon/omnpafdjidgpdmlimbangcjjaaodbeof

## アーキテクチャ

以下の図はCanyonとそのエコシステムのコンポーネントアーキテクチャを示しています：

1. BabelプラグインがCI/CDパイプラインでコード計装を完了します。
2. プロジェクトがテスト環境にリリースされ、ユーザーはUI自動化または手動テストを選択して計装コードプローブをトリガーできます。
3. 生成されたカバレッジデータはCanyonサーバーに報告されます。
4. CanyonサーバーがデータをConsumingし、GitLabが提供するソースコード情報と組み合わせてカバレッジレポートを生成します。

![](https://cdn.jsdelivr.net/gh/canyon-project/assets/docs/static/docs/getting-started/introduction/architecture.png)
