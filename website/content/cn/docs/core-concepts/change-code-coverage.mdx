# **变更代码覆盖率**

**变更代码覆盖率**让您可以聚焦这次变更代码的测试情况。

## 维度


### **新增（文件）行覆盖率**

**计算逻辑：**
1. git diff 两个提交之间的差异文件 => 差异行号（会有包含注释、空白行的情况）
2. 遍历变更文件 **coverageMap** 的 **branchMap**、**fnMap**、**statementMap** 的定位是否包含了差异行号
3. **已覆盖**的定义：差异行号所处的 **branchMap**、**fnMap**、**statementMap** 均已覆盖

**计算公式：**


```
新增（文件）行覆盖率 = 已覆盖（文件）行数 / 新增（文件）行总数
```

### **新增分支覆盖率**

**计算逻辑：**
1. git diff 两个提交之间的差异文件 => 差异行号
2. 遍历变更文件 **coverageMap** 的 **branchMap** 的定位是否包含了差异行号
3. **已覆盖**的定义：差异行号所处的 **branchMap** 已覆盖

**计算公式：**
```
新增分支覆盖率 = 已覆盖分支数 / 新增分支总数
```

### **新增函数覆盖率**

**计算逻辑：**
1. git diff 两个提交之间的差异文件 => 差异行号
2. 遍历变更文件 **coverageMap** 的 **fnMap** 的定位是否包含了差异行号
3. **已覆盖**的定义：差异行号所处的 **fnMap** 已覆盖

**计算公式：**
```
新增函数覆盖率 = 已覆盖函数数 / 新增函数总数
```

### **新增语句覆盖率**
**计算逻辑：**
1. git diff 两个提交之间的差异文件 => 差异行号
2. 遍历变更文件 **coverageMap** 的 **statementMap** 的定位是否包含了差异行号
3. **已覆盖**的定义：差异行号所处的 **statementMap** 已覆盖
**计算公式：**
```
新增语句覆盖率 = 已覆盖语句数 / 新增语句总数
```
